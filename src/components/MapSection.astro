---
import mapImg from '../assets/map-boite.jpg';
import heroImg from '../assets/hero-boite.png';
import heroCabine from '../assets/boite-a-livres-cabine-1024x512.png';

const mapImgSrc = mapImg.src;
const heroImgSrc = heroImg.src;
const heroCabineSrc = heroCabine.src;
---

<section id="carte" class="py-16 sm:py-20 bg-gradient-to-br from-cream via-white to-[#dceaff] relative overflow-hidden">
	<div class="absolute inset-0 pointer-events-none">
		<div class="absolute -top-10 left-10 h-40 w-72 rounded-full bg-cta/15 blur-3xl"></div>
		<div class="absolute bottom-0 right-0 h-52 w-52 rounded-full bg-leaf/20 blur-3xl"></div>
	</div>
	<div class="section-shell space-y-8 relative">
		<div class="grid gap-10 lg:grid-cols-[1.1fr_1fr] items-start">
			<div class="space-y-4" data-animate="fade-up">
				<p class="badge">Carte & découverte</p>
				<h2 class="section-title">Explorez les boîtes à livres près de chez vous</h2>
				<p class="section-subtitle">
					Visualisez les boîtes à livres sur une carte interactive (mockup ici). Filtrez par ville, par type de lieu
					(école, parc, immeuble, commerce), par accessibilité.
				</p>
				<ul class="space-y-3 text-text/90">
					<li class="flex items-start gap-3">
						<span class="mt-1 h-2.5 w-2.5 rounded-full bg-cta"></span>
						<span class="font-semibold text-ink">Localisation précise</span>
					</li>
					<li class="flex items-start gap-3">
						<span class="mt-1 h-2.5 w-2.5 rounded-full bg-leaf"></span>
						<span class="font-semibold text-ink">Horaires ou accès libre</span>
					</li>
					<li class="flex items-start gap-3">
						<span class="mt-1 h-2.5 w-2.5 rounded-full bg-blue-500"></span>
						<span class="font-semibold text-ink">Suggestions de livres déposés récemment</span>
					</li>
				</ul>

				<div class="flex flex-wrap gap-3 pt-2">
					<a href="#inscription" class="cta-primary magnetic" data-magnetic>Je cherche une boîte près de chez moi</a>
					<a href="#proposer" class="cta-secondary magnetic" data-magnetic>Ajouter ma boîte à la carte</a>
				</div>
			</div>

			<div class="space-y-4" data-animate="fade-up" data-delay="0.1">
				<div class="glass-card p-0 shadow-soft tilt-card overflow-hidden" data-float>
					<div class="flex items-center justify-between mb-3 px-4 pt-4">
						<h3 class="font-display font-semibold text-lg text-ink">Carte des boîtes</h3>
						<div class="flex items-center gap-2 text-xs text-muted">
							<span class="h-2.5 w-2.5 rounded-full bg-cta"></span> Publique
							<span class="h-2.5 w-2.5 rounded-full bg-blue-500 ml-3"></span> École
							<span class="h-2.5 w-2.5 rounded-full bg-emerald-500 ml-3"></span> Association
						</div>
					</div>
					<div
						class="relative h-80 rounded-xl border border-white overflow-hidden"
						style={`background-image: linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.55)), url(${mapImgSrc}); background-size: cover; background-position: center;`}
					>
						<div class="absolute inset-4 rounded-lg border border-cta/30"></div>
						<div class="absolute inset-0">
							{[
								{ pos: 'top-14 left-10', color: 'bg-cta', shadow: 'shadow-glow' },
								{ pos: 'top-8 right-16', color: 'bg-blue-500', shadow: 'shadow-soft' },
								{ pos: 'bottom-8 left-16', color: 'bg-emerald-500', shadow: 'shadow-soft' },
								{ pos: 'bottom-14 right-8', color: 'bg-cta', shadow: 'shadow-glow' },
								{ pos: 'top-1/2 left-1/2', color: 'bg-blue-500', shadow: 'shadow-soft' },
							].map((marker) => (
								<div class={`group marker absolute ${marker.pos}`} data-marker>
									<div class={`h-4 w-4 rounded-full border-2 border-white ${marker.color} ${marker.shadow}`}></div>
									<div
										class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 h-10 w-10 rounded-full bg-white/15 scale-0 group-hover:scale-100 transition-transform"
									></div>
								</div>
							))}
						</div>
						<div class="absolute bottom-4 right-4 glass-card px-4 py-3 text-sm shadow-soft bg-white/90">
							<p class="font-semibold text-ink">Filtrer</p>
							<div class="flex gap-2 mt-2 flex-wrap">
								<span class="badge bg-white/90 text-ink">Ville</span>
								<span class="badge bg-white/90 text-ink">Type de lieu</span>
								<span class="badge bg-white/90 text-ink">Accessibilité</span>
							</div>
						</div>
					</div>
				</div>

				<div class="grid gap-4 sm:grid-cols-3" data-animate="fade-up" data-delay="0.18">
					{[
						{
							name: 'Parc des Tilleuls',
							address: 'Quartier Nord',
							desc: 'Une boîte animée par les habitants du quartier.',
						},
						{
							name: 'École Jean Moulin',
							address: 'Centre-ville',
							desc: 'Boîte à livres pour petits et grands.',
						},
						{
							name: 'Place du Marché',
							address: 'Cœur de ville',
							desc: 'Une boîte pour échanger romans et BD.',
						},
					].map((box) => (
						<div class="glass-card p-4 shadow-soft hover:-translate-y-1 transition-transform">
							<h4 class="font-display font-semibold text-ink">{box.name}</h4>
							<p class="text-xs text-muted">{box.address}</p>
							<p class="text-sm text-text/80 mt-2">{box.desc}</p>
						</div>
					))}
				</div>

				<div class="glass-card p-4 shadow-soft" data-animate="fade-up" data-delay="0.2">
					<h4 class="font-display font-semibold text-ink mb-3">Exemples en images</h4>
					<div class="grid gap-3 sm:grid-cols-3">
						{[
							{ src: mapImgSrc, alt: 'Boîte en centre-ville' },
							{ src: heroImgSrc, alt: 'Cabine boîte à livres' },
							{ src: heroCabineSrc, alt: 'Cabane en bois' },
						].map((item) => (
							<div class="relative rounded-xl overflow-hidden group">
								<img src={item.src} alt={item.alt} class="h-32 w-full object-cover transition scale-100 group-hover:scale-105" />
								<div class="absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent"></div>
							</div>
						))}
					</div>
				</div>
			</div>
		</div>
	</div>
</section>
